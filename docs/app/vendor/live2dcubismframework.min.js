(()=>{"use strict";var t={345:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CSM_LOG_LEVEL_VERBOSE=0,e.CSM_LOG_LEVEL_DEBUG=1,e.CSM_LOG_LEVEL_INFO=2,e.CSM_LOG_LEVEL_WARNING=3,e.CSM_LOG_LEVEL_ERROR=4,e.CSM_LOG_LEVEL_OFF=5,e.CSM_LOG_LEVEL=e.CSM_LOG_LEVEL_VERBOSE},166:function(t,e,r){var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(624),o=function(){function t(t){this._id="string"!=typeof t?t:new i.csmString(t)}return t.prototype.getString=function(){return this._id},t.prototype.isEqual=function(e){return"string"==typeof e?this._id.isEqual(e):e instanceof i.csmString?this._id.isEqual(e.s):e instanceof t&&this._id.isEqual(e._id.s)},t.prototype.isNotEqual=function(e){return"string"==typeof e?!this._id.isEqual(e):e instanceof i.csmString?!this._id.isEqual(e.s):e instanceof t&&!this._id.isEqual(e._id.s)},t}();e.CubismId=o;var s=n(r(166));(e.Live2DCubismFramework||(e.Live2DCubismFramework={})).CubismId=s.CubismId},770:function(t,e,r){var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(604),o=r(166),s=function(){function t(){this._ids=new i.csmVector}return t.prototype.release=function(){for(var t=0;t<this._ids.getSize();++t)this._ids.set(t,void 0);this._ids=null},t.prototype.registerIds=function(t){for(var e=0;e<t.length;e++)this.registerId(t[e])},t.prototype.registerId=function(t){var e=null;return"string"!=typeof t?this.registerId(t.s):(null!=(e=this.findId(t))||(e=new o.CubismId(t),this._ids.pushBack(e)),e)},t.prototype.getId=function(t){return this.registerId(t)},t.prototype.isExist=function(t){return"string"==typeof t?null!=this.findId(t):this.isExist(t.s)},t.prototype.findId=function(t){for(var e=0;e<this._ids.getSize();++e)if(this._ids.at(e).getString().isEqual(t))return this._ids.at(e);return null},t}();e.CubismIdManager=s;var u=n(r(770));(e.Live2DCubismFramework||(e.Live2DCubismFramework={})).CubismIdManager=u.CubismIdManager},400:function(t,e,r){var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(770),o=r(690),s=r(508),u=r(666);e.strtod=function(t,e){for(var r=0,n=1;;n++){var i=t.slice(n-1,n);if("e"!=i&&"-"!=i&&"E"!=i){var o=t.substring(0,n),s=Number(o);if(isNaN(s))break;r=n}}var u=parseFloat(t);return isNaN(u)&&(u=NaN),e[0]=t.slice(r),u};var a=!1,l=!1,p=null,c=null;e.Constant=Object.freeze({vertexOffset:0,vertexStep:2}),e.csmDelete=function(t){t&&(t=void 0)};var f=function(){function t(){}return t.startUp=function(t){if(void 0===t&&(t=null),a)return s.CubismLogInfo("CubismFramework.startUp() is already done."),a;if(null!=(p=t)&&Live2DCubismCore.Logging.csmSetLogFunction(p.logFunction),a=!0){var e=Live2DCubismCore.Version.csmGetVersion(),r=(4278190080&e)>>24,n=(16711680&e)>>16,i=65535&e,o=e;s.CubismLogInfo("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+r).slice(-2),("00"+n).slice(-2),("0000"+i).slice(-4),o)}return s.CubismLogInfo("CubismFramework.startUp() is complete."),a},t.cleanUp=function(){a=!1,l=!1,p=null,c=null},t.initialize=function(){s.CSM_ASSERT(a),a?l?s.CubismLogWarning("CubismFramework.initialize() skipped, already initialized."):(u.Value.staticInitializeNotForClientCall(),c=new i.CubismIdManager,l=!0,s.CubismLogInfo("CubismFramework.initialize() is complete.")):s.CubismLogWarning("CubismFramework is not started.")},t.dispose=function(){s.CSM_ASSERT(a),a?l?(u.Value.staticReleaseNotForClientCall(),c.release(),c=null,o.CubismRenderer.staticRelease(),l=!1,s.CubismLogInfo("CubismFramework.dispose() is complete.")):s.CubismLogWarning("CubismFramework.dispose() skipped, not initialized."):s.CubismLogWarning("CubismFramework is not started.")},t.isStarted=function(){return a},t.isInitialized=function(){return l},t.coreLogFunction=function(t){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(t)},t.getLoggingLevel=function(){return null!=p?p.loggingLevel:_.LogLevel_Off},t.getIdManager=function(){return c},t}();e.CubismFramework=f;var _;e.Option=function(){},function(t){t[t.LogLevel_Verbose=0]="LogLevel_Verbose",t[t.LogLevel_Debug=1]="LogLevel_Debug",t[t.LogLevel_Info=2]="LogLevel_Info",t[t.LogLevel_Warning=3]="LogLevel_Warning",t[t.LogLevel_Error=4]="LogLevel_Error",t[t.LogLevel_Off=5]="LogLevel_Off"}(_=e.LogLevel||(e.LogLevel={}));var h,g=n(r(400));(h=e.Live2DCubismFramework||(e.Live2DCubismFramework={})).Constant=g.Constant,h.csmDelete=g.csmDelete,h.CubismFramework=g.CubismFramework},220:function(t,e,r){var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this._tr=new Float32Array(16),this.loadIdentity()}return t.multiply=function(t,e,r){for(var n=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),i=0;i<4;++i)for(var o=0;o<4;++o)for(var s=0;s<4;++s)n[o+4*i]+=t[s+4*i]*e[o+4*s];for(i=0;i<16;++i)r[i]=n[i]},t.prototype.loadIdentity=function(){var t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(t)},t.prototype.setMatrix=function(t){for(var e=0;e<16;++e)this._tr[e]=t[e]},t.prototype.getArray=function(){return this._tr},t.prototype.getScaleX=function(){return this._tr[0]},t.prototype.getScaleY=function(){return this._tr[5]},t.prototype.getTranslateX=function(){return this._tr[12]},t.prototype.getTranslateY=function(){return this._tr[13]},t.prototype.transformX=function(t){return this._tr[0]*t+this._tr[12]},t.prototype.transformY=function(t){return this._tr[5]*t+this._tr[13]},t.prototype.invertTransformX=function(t){return(t-this._tr[12])/this._tr[0]},t.prototype.invertTransformY=function(t){return(t-this._tr[13])/this._tr[5]},t.prototype.translateRelative=function(e,r){var n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,r,0,1]);t.multiply(n,this._tr,this._tr)},t.prototype.translate=function(t,e){this._tr[12]=t,this._tr[13]=e},t.prototype.translateX=function(t){this._tr[12]=t},t.prototype.translateY=function(t){this._tr[13]=t},t.prototype.scaleRelative=function(e,r){var n=new Float32Array([e,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]);t.multiply(n,this._tr,this._tr)},t.prototype.scale=function(t,e){this._tr[0]=t,this._tr[5]=e},t.prototype.multiplyByMatrix=function(e){t.multiply(e.getArray(),this._tr,this._tr)},t.prototype.clone=function(){for(var e=new t,r=0;r<this._tr.length;r++)e._tr[r]=this._tr[r];return e},t}();e.CubismMatrix44=i;var o=n(r(220));(e.Live2DCubismFramework||(e.Live2DCubismFramework={})).CubismMatrix44=o.CubismMatrix44},690:function(t,e,r){var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i,o=r(220),s=function(){function t(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._model=null,this._modelColor=new u,this._mvpMatrix4x4=new o.CubismMatrix44,this._mvpMatrix4x4.loadIdentity()}return t.create=function(){return null},t.delete=function(t){},t.prototype.initialize=function(t){this._model=t},t.prototype.drawModel=function(){null!=this.getModel()&&this.doDrawModel()},t.prototype.setMvpMatrix=function(t){this._mvpMatrix4x4.setMatrix(t.getArray())},t.prototype.getMvpMatrix=function(){return this._mvpMatrix4x4},t.prototype.setModelColor=function(t,e,r,n){t<0?t=0:t>1&&(t=1),e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),n<0?n=0:n>1&&(n=1),this._modelColor.R=t,this._modelColor.G=e,this._modelColor.B=r,this._modelColor.A=n},t.prototype.getModelColor=function(){return JSON.parse(JSON.stringify(this._modelColor))},t.prototype.setIsPremultipliedAlpha=function(t){this._isPremultipliedAlpha=t},t.prototype.isPremultipliedAlpha=function(){return this._isPremultipliedAlpha},t.prototype.setIsCulling=function(t){this._isCulling=t},t.prototype.isCulling=function(){return this._isCulling},t.prototype.setAnisotropy=function(t){this._anisortopy=t},t.prototype.getAnisotropy=function(){return this._anisortopy},t.prototype.getModel=function(){return this._model},t}();e.CubismRenderer=s,(i=e.CubismBlendMode||(e.CubismBlendMode={}))[i.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",i[i.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",i[i.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative";var u=function(){this.R=1,this.G=1,this.B=1,this.A=1};e.CubismTextureColor=u;var a,l=n(r(690));(a=e.Live2DCubismFramework||(e.Live2DCubismFramework={})).CubismBlendMode=l.CubismBlendMode,a.CubismRenderer=l.CubismRenderer,a.CubismTextureColor=l.CubismTextureColor},713:function(t,e,r){var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(508),o=function(t,e){this.first=null==t?null:t,this.second=null==e?null:e};e.csmPair=o;var s=function(){function t(t){null!=t?t<1?(this._keyValues=[],this._dummyValue=null,this._size=0):(this._keyValues=new Array(t),this._size=t):(this._keyValues=[],this._dummyValue=null,this._size=0)}return t.prototype.release=function(){this.clear()},t.prototype.appendKey=function(t){this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new o(t),this._size+=1},t.prototype.getValue=function(t){for(var e=-1,r=0;r<this._size;r++)if(this._keyValues[r].first==t){e=r;break}return e>=0?this._keyValues[e].second:(this.appendKey(t),this._keyValues[this._size-1].second)},t.prototype.setValue=function(t,e){for(var r=-1,n=0;n<this._size;n++)if(this._keyValues[n].first==t){r=n;break}r>=0?this._keyValues[r].second=e:(this.appendKey(t),this._keyValues[this._size-1].second=e)},t.prototype.isExist=function(t){for(var e=0;e<this._size;e++)if(this._keyValues[e].first==t)return!0;return!1},t.prototype.clear=function(){this._keyValues=void 0,this._keyValues=null,this._keyValues=[],this._size=0},t.prototype.getSize=function(){return this._size},t.prototype.prepareCapacity=function(e,r){e>this._keyValues.length&&(0==this._keyValues.length?(!r&&e<t.DefaultSize&&(e=t.DefaultSize),this._keyValues.length=e):(!r&&e<2*this._keyValues.length&&(e=2*this._keyValues.length),this._keyValues.length=e))},t.prototype.begin=function(){return new u(this,0)},t.prototype.end=function(){return new u(this,this._size)},t.prototype.erase=function(t){var e=t._index;return e<0||this._size<=e?t:(this._keyValues.splice(e,1),--this._size,new u(this,e))},t.prototype.dumpAsInt=function(){for(var t=0;t<this._size;t++)i.CubismLogDebug("{0} ,",this._keyValues[t]),i.CubismLogDebug("\n")},t.DefaultSize=10,t}();e.csmMap=s;var u=function(){function t(t,e){this._map=null!=t?t:new s,this._index=null!=e?e:0}return t.prototype.set=function(t){return this._index=t._index,this._map=t._map,this},t.prototype.preIncrement=function(){return++this._index,this},t.prototype.preDecrement=function(){return--this._index,this},t.prototype.increment=function(){return new t(this._map,this._index++)},t.prototype.decrement=function(){var e=new t(this._map,this._index);return this._map=e._map,this._index=e._index,this},t.prototype.ptr=function(){return this._map._keyValues[this._index]},t.prototype.notEqual=function(t){return this._index!=t._index||this._map!=t._map},t}();e.iterator=u;var a,l=n(r(713));(a=e.Live2DCubismFramework||(e.Live2DCubismFramework={})).csmMap=l.csmMap,a.csmPair=l.csmPair,a.iterator=l.iterator},624:function(t,e,r){var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.s=t}return t.prototype.append=function(t,e){return this.s+=void 0!==e?t.substr(0,e):t,this},t.prototype.expansion=function(t,e){for(var r=0;r<t;r++)this.append(e);return this},t.prototype.getBytes=function(){return encodeURIComponent(this.s).replace(/%../g,"x").length},t.prototype.getLength=function(){return this.s.length},t.prototype.isLess=function(t){return this.s<t.s},t.prototype.isGreat=function(t){return this.s>t.s},t.prototype.isEqual=function(t){return this.s==t},t.prototype.isEmpty=function(){return 0==this.s.length},t}();e.csmString=i;var o=n(r(624));(e.Live2DCubismFramework||(e.Live2DCubismFramework={})).csmString=o.csmString},604:function(t,e,r){var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){void 0===t&&(t=0),t<1?(this._ptr=[],this._capacity=0,this._size=0):(this._ptr=new Array(t),this._capacity=t,this._size=0)}return t.prototype.at=function(t){return this._ptr[t]},t.prototype.set=function(t,e){this._ptr[t]=e},t.prototype.get=function(t){void 0===t&&(t=0);for(var e=new Array,r=t;r<this._size;r++)e.push(this._ptr[r]);return e},t.prototype.pushBack=function(e){this._size>=this._capacity&&this.prepareCapacity(0==this._capacity?t.s_defaultSize:2*this._capacity),this._ptr[this._size++]=e},t.prototype.clear=function(){this._ptr.length=0,this._size=0},t.prototype.getSize=function(){return this._size},t.prototype.assign=function(t,e){this._size<t&&this.prepareCapacity(t);for(var r=0;r<t;r++)this._ptr[r]=e;this._size=t},t.prototype.resize=function(t,e){void 0===e&&(e=null),this.updateSize(t,e,!0)},t.prototype.updateSize=function(t,e,r){if(void 0===e&&(e=null),void 0===r&&(r=!0),this._size<t)if(this.prepareCapacity(t),r)for(var n=this._size;n<t;n++)this._ptr[n]="function"==typeof e?JSON.parse(JSON.stringify(new e)):e;else for(n=this._size;n<t;n++)this._ptr[n]=e;else{var i=this._size-t;this._ptr.splice(this._size-i,i)}this._size=t},t.prototype.insert=function(t,e,r){var n=t._index,i=e._index,o=r._index,s=o-i;this.prepareCapacity(this._size+s);var u=this._size-n;if(u>0)for(var a=0;a<u;a++)this._ptr.splice(n+a,0,null);for(a=i;a<o;a++,n++)this._ptr[n]=e._vector._ptr[a];this._size=this._size+s},t.prototype.remove=function(t){return!(t<0||this._size<=t||(this._ptr.splice(t,1),--this._size,0))},t.prototype.erase=function(t){var e=t._index;return e<0||this._size<=e?t:(this._ptr.splice(e,1),--this._size,new o(this,e))},t.prototype.prepareCapacity=function(t){t>this._capacity&&(0==this._capacity?(this._ptr=new Array(t),this._capacity=t):(this._ptr.length=t,this._capacity=t))},t.prototype.begin=function(){return 0==this._size?this.end():new o(this,0)},t.prototype.end=function(){return new o(this,this._size)},t.prototype.getOffset=function(e){var r=new t;return r._ptr=this.get(e),r._size=this.get(e).length,r._capacity=this.get(e).length,r},t.s_defaultSize=10,t}();e.csmVector=i;var o=function(){function t(t,e){this._vector=null!=t?t:null,this._index=null!=e?e:0}return t.prototype.set=function(t){return this._index=t._index,this._vector=t._vector,this},t.prototype.preIncrement=function(){return++this._index,this},t.prototype.preDecrement=function(){return--this._index,this},t.prototype.increment=function(){return new t(this._vector,this._index++)},t.prototype.decrement=function(){return new t(this._vector,this._index--)},t.prototype.ptr=function(){return this._vector._ptr[this._index]},t.prototype.substitution=function(t){return this._index=t._index,this._vector=t._vector,this},t.prototype.notEqual=function(t){return this._index!=t._index||this._vector!=t._vector},t}();e.iterator=o;var s,u=n(r(604));(s=e.Live2DCubismFramework||(e.Live2DCubismFramework={})).csmVector=u.csmVector,s.iterator=u.iterator},508:function(t,e,r){var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(345),o=r(400);e.CubismLogPrint=function(t,e,r){s.print(t,"[CSM]"+e,r)},e.CubismLogPrintIn=function(t,r,n){e.CubismLogPrint(t,r+"\n",n)},e.CSM_ASSERT=function(t){console.assert(t)},i.CSM_LOG_LEVEL<=i.CSM_LOG_LEVEL_VERBOSE?(e.CubismLogVerbose=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Verbose,"[V]"+t,r)},e.CubismLogDebug=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Debug,"[D]"+t,r)},e.CubismLogInfo=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Info,"[I]"+t,r)},e.CubismLogWarning=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Warning,"[W]"+t,r)},e.CubismLogError=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Error,"[E]"+t,r)}):i.CSM_LOG_LEVEL==i.CSM_LOG_LEVEL_DEBUG?(e.CubismLogDebug=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Debug,"[D]"+t,r)},e.CubismLogInfo=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Info,"[I]"+t,r)},e.CubismLogWarning=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Warning,"[W]"+t,r)},e.CubismLogError=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Error,"[E]"+t,r)}):i.CSM_LOG_LEVEL==i.CSM_LOG_LEVEL_INFO?(e.CubismLogInfo=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Info,"[I]"+t,r)},e.CubismLogWarning=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Warning,"[W]"+t,r)},e.CubismLogError=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Error,"[E]"+t,r)}):i.CSM_LOG_LEVEL==i.CSM_LOG_LEVEL_WARNING?(e.CubismLogWarning=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Warning,"[W]"+t,r)},e.CubismLogError=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Error,"[E]"+t,r)}):i.CSM_LOG_LEVEL==i.CSM_LOG_LEVEL_ERROR&&(e.CubismLogError=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.CubismLogPrintIn(o.LogLevel.LogLevel_Error,"[E]"+t,r)});var s=function(){function t(){}return t.print=function(t,e,r){if(!(t<o.CubismFramework.getLoggingLevel())){var n=o.CubismFramework.coreLogFunction;n&&n(e.replace(/\{(\d+)\}/g,(function(t,e){return r[e]})))}},t.dumpBytes=function(t,e,r){for(var n=0;n<r;n++)n%16==0&&n>0?this.print(t,"\n"):n%8==0&&n>0&&this.print(t,"  "),this.print(t,"{0} ",[255&e[n]]);this.print(t,"\n")},t}();e.CubismDebug=s;var u=n(r(508));(e.Live2DCubismFramework||(e.Live2DCubismFramework={})).CubismDebug=u.CubismDebug},666:function(t,e,r){var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s=r(400),u=r(713),a=r(624),l=r(604),p=r(508),c="Error: type mismatch",f=function(){function t(){}return t.prototype.getRawString=function(t,e){return this.getString(t,e)},t.prototype.toInt=function(t){return void 0===t&&(t=0),t},t.prototype.toFloat=function(t){return void 0===t&&(t=0),t},t.prototype.toBoolean=function(t){return void 0===t&&(t=!1),t},t.prototype.getSize=function(){return 0},t.prototype.getArray=function(t){return void 0===t&&(t=null),t},t.prototype.getVector=function(t){return t},t.prototype.getMap=function(t){return t},t.prototype.getValueByIndex=function(e){return t.errorValue.setErrorNotForClientCall(c)},t.prototype.getValueByString=function(e){return t.nullValue.setErrorNotForClientCall(c)},t.prototype.getKeys=function(){return t.s_dummyKeys},t.prototype.isError=function(){return!1},t.prototype.isNull=function(){return!1},t.prototype.isBool=function(){return!1},t.prototype.isFloat=function(){return!1},t.prototype.isString=function(){return!1},t.prototype.isArray=function(){return!1},t.prototype.isMap=function(){return!1},t.prototype.equals=function(t){return!1},t.prototype.isStatic=function(){return!1},t.prototype.setErrorNotForClientCall=function(t){return v.errorValue},t.staticInitializeNotForClientCall=function(){g.trueValue=new g(!0),g.falseValue=new g(!1),v.errorValue=new v("ERROR",!0),this.nullValue=new m,t.s_dummyKeys=new l.csmVector},t.staticReleaseNotForClientCall=function(){g.trueValue=null,g.falseValue=null,v.errorValue=null,t.nullValue=null,t.s_dummyKeys=null,g.trueValue=null,g.falseValue=null,v.errorValue=null,t.nullValue=null,t.s_dummyKeys=null},t}();e.Value=f;var _=function(){function t(t,e){this._error=null,this._lineCount=0,this._root=null,null!=t&&this.parseBytes(t,e)}return t.create=function(e,r){var n=new t;return n.parseBytes(e,r)?n:(t.delete(n),null)},t.delete=function(t){},t.prototype.getRoot=function(){return this._root},t.prototype.arrayBufferToString=function(t){for(var e=new Uint8Array(t),r="",n=0,i=e.length;n<i;++n)r+="%"+this.pad(e[n].toString(16));return decodeURIComponent(r)},t.prototype.pad=function(t){return t.length<2?"0"+t:t},t.prototype.parseBytes=function(t,e){var r,n=new Array(1),i=this.arrayBufferToString(t);return this._root=this.parseValue(i,e,0,n),this._error?(r="Json parse error : @line "+(this._lineCount+1)+"\n",this._root=new y(r),p.CubismLogInfo("{0}",this._root.getRawString()),!1):null!=this._root||(this._root=new v(new a.csmString(this._error),!1),!1)},t.prototype.getParseError=function(){return this._error},t.prototype.checkEndOfFile=function(){return this._root.getArray()[1].equals("EOF")},t.prototype.parseValue=function(t,e,r,n){if(this._error)return null;for(var i,o=null,u=r;u<e;u++)switch(t[u]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":var a=new Array(1);return i=s.strtod(t.slice(u),a),n[0]=t.indexOf(a[0]),new h(i);case'"':return new y(this.parseString(t,e,u+1,n));case"[":return this.parseArray(t,e,u+1,n);case"{":return this.parseObject(t,e,u+1,n);case"n":return u+3<e?(o=new m,n[0]=u+4):this._error="parse null",o;case"t":return u+3<e?(o=g.trueValue,n[0]=u+4):this._error="parse true",o;case"f":return u+4<e?(o=g.falseValue,n[0]=u+5):this._error="illegal ',' position",o;case",":return this._error="illegal ',' position",null;case"]":return n[0]=u,null;case"\n":this._lineCount++}return this._error="illegal end of value",null},t.prototype.parseString=function(t,e,r,n){if(this._error)return null;for(var i=r,o=new a.csmString(""),s=r;i<e;i++)switch(t[i]){case'"':return n[0]=i+1,o.append(t.slice(s),i-s),o.s;case"//":if(++i-1>s&&o.append(t.slice(s),i-s),s=i+1,i<e)switch(t[i]){case"\\":o.expansion(1,"\\");break;case'"':o.expansion(1,'"');break;case"/":o.expansion(1,"/");break;case"b":o.expansion(1,"\b");break;case"f":o.expansion(1,"\f");break;case"n":o.expansion(1,"\n");break;case"r":o.expansion(1,"\r");break;case"t":o.expansion(1,"\t");break;case"u":this._error="parse string/unicord escape not supported"}else this._error="parse string/escape error"}return this._error="parse string/illegal end",null},t.prototype.parseObject=function(t,e,r,n){if(this._error)return null;for(var i=new L,o="",s=r,u=Array(1),a=!1;s<e;s++){t:for(;s<e;s++)switch(t[s]){case'"':if(o=this.parseString(t,e,s+1,u),this._error)return null;s=u[0],a=!0;break t;case"}":return n[0]=s+1,i;case":":this._error="illegal ':' position";break;case"\n":this._lineCount++}if(!a)return this._error="key not found",null;a=!1;t:for(;s<e;s++)switch(t[s]){case":":a=!0,s++;break t;case"}":this._error="illegal '}' position";break;case"\n":this._lineCount++}if(!a)return this._error="':' not found",null;var l=this.parseValue(t,e,s,u);if(this._error)return null;s=u[0],i.put(o,l);t:for(;s<e;s++)switch(t[s]){case",":break t;case"}":return n[0]=s+1,i;case"\n":this._lineCount++}}return this._error="illegal end of perseObject",null},t.prototype.parseArray=function(t,e,r,n){if(this._error)return null;for(var i=new d,o=r,s=new Array(1);o<e;o++){var u=this.parseValue(t,e,o,s);if(this._error)return null;o=s[0],u&&i.add(u);t:for(;o<e;o++)switch(t[o]){case",":break t;case"]":return n[0]=o+1,i;case"\n":++this._lineCount}}return i=void 0,this._error="illegal end of parseObject",null},t}();e.CubismJson=_;var h=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return i(e,t),e.prototype.isFloat=function(){return!0},e.prototype.getString=function(t,e){return this._value=parseFloat("\0"),this._stringBuffer="\0",this._stringBuffer},e.prototype.toInt=function(t){return void 0===t&&(t=0),parseInt(this._value.toString())},e.prototype.toFloat=function(t){return void 0===t&&(t=0),this._value},e.prototype.equals=function(t){return"number"==typeof t&&!Math.round(t)&&t==this._value},e}(f);e.JsonFloat=h;var g=function(t){function e(e){var r=t.call(this)||this;return r._boolValue=e,r}return i(e,t),e.prototype.isBool=function(){return!0},e.prototype.toBoolean=function(t){return void 0===t&&(t=!1),this._boolValue},e.prototype.getString=function(t,e){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer},e.prototype.equals=function(t){return"boolean"==typeof t&&t==this._boolValue},e.prototype.isStatic=function(){return!0},e}(f);e.JsonBoolean=g;var y=function(t){function e(e){var r=t.call(this)||this;return"string"==typeof e&&(r._stringBuffer=e),e instanceof a.csmString&&(r._stringBuffer=e.s),r}return i(e,t),e.prototype.isString=function(){return!0},e.prototype.getString=function(t,e){return this._stringBuffer},e.prototype.equals=function(t){return"string"==typeof t?this._stringBuffer==t:t instanceof a.csmString&&this._stringBuffer==t.s},e}(f);e.JsonString=y;var v=function(t){function e(e,r){var n=this;return(n=t.call(this,e)||this)._isStatic=r,n}return i(e,t),e.prototype.isStatic=function(){return this._isStatic},e.prototype.setErrorNotForClientCall=function(t){return this._stringBuffer=t,this},e.prototype.isError=function(){return!0},e}(y);e.JsonError=v;var m=function(t){function e(){var e=t.call(this)||this;return e._stringBuffer="NullValue",e}return i(e,t),e.prototype.isNull=function(){return!0},e.prototype.getString=function(t,e){return this._stringBuffer},e.prototype.isStatic=function(){return!0},e}(f);e.JsonNullvalue=m;var d=function(t){function e(){var e=t.call(this)||this;return e._array=new l.csmVector,e}return i(e,t),e.prototype.release=function(){for(var t=this._array.begin();t.notEqual(this._array.end());t.preIncrement()){var e=t.ptr();e&&!e.isStatic()&&(e=void 0,e=null)}},e.prototype.isArray=function(){return!0},e.prototype.getValueByIndex=function(t){if(t<0||this._array.getSize()<=t)return f.errorValue.setErrorNotForClientCall("Error: index out of bounds");var e=this._array.at(t);return null==e?f.nullValue:e},e.prototype.getValueByString=function(t){return f.errorValue.setErrorNotForClientCall(c)},e.prototype.getString=function(t,e){for(var r=e+"[\n",n=this._array.begin();n.notEqual(this._array.end());n.increment()){var i=n.ptr();this._stringBuffer+=e+""+i.getString(e+" ")+"\n"}return this._stringBuffer=r+e+"]\n",this._stringBuffer},e.prototype.add=function(t){this._array.pushBack(t)},e.prototype.getVector=function(t){return void 0===t&&(t=null),this._array},e.prototype.getSize=function(){return this._array.getSize()},e}(f);e.JsonArray=d;var L=function(t){function e(){var e=t.call(this)||this;return e._map=new u.csmMap,e}return i(e,t),e.prototype.release=function(){for(var t=this._map.begin();t.notEqual(this._map.end());){var e=t.ptr().second;e&&!e.isStatic()&&(e=void 0,e=null),t.preIncrement()}},e.prototype.isMap=function(){return!0},e.prototype.getValueByString=function(t){if(t instanceof a.csmString){var e=this._map.getValue(t.s);return null==e?f.nullValue:e}for(var r=this._map.begin();r.notEqual(this._map.end());r.preIncrement())if(r.ptr().first==t)return null==r.ptr().second?f.nullValue:r.ptr().second;return f.nullValue},e.prototype.getValueByIndex=function(t){return f.errorValue.setErrorNotForClientCall(c)},e.prototype.getString=function(t,e){this._stringBuffer=e+"{\n";for(var r=this._map.begin();r.notEqual(this._map.end());){var n=r.ptr().first,i=r.ptr().second;this._stringBuffer+=e+" "+n+" : "+i.getString(e+"   ")+" \n",r.preIncrement()}return this._stringBuffer+=e+"}\n",this._stringBuffer},e.prototype.getMap=function(t){return this._map},e.prototype.put=function(t,e){this._map.setValue(t,e)},e.prototype.getKeys=function(){if(!this._keys){this._keys=new l.csmVector;for(var t=this._map.begin();t.notEqual(this._map.end());){var e=t.ptr().first;this._keys.pushBack(e),t.preIncrement()}}return this._keys},e.prototype.getSize=function(){return this._keys.getSize()},e}(f);e.JsonMap=L;var C,b=o(r(666));(C=e.Live2DCubismFramework||(e.Live2DCubismFramework={})).CubismJson=b.CubismJson,C.JsonArray=b.JsonArray,C.JsonBoolean=b.JsonBoolean,C.JsonError=b.JsonError,C.JsonFloat=b.JsonFloat,C.JsonMap=b.JsonMap,C.JsonNullvalue=b.JsonNullvalue,C.JsonString=b.JsonString,C.Value=b.Value}},e={},r=function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}(400);window.CubismFramework=r})();